(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{669:function(t,e,n){"use strict";n.r(e);var c=n(65),o=n.n(c),r={data:function(){return{title:"GitHub OAuth",connectInfo:"Connecting...",authData:{github:{uid:"",access_token:"",scope:"",token_type:""}}}},beforeCreate:function(){var t=this,e="https://bird.ioliu.cn/v2?url=https://github.com/login/oauth/access_token?client_id=52583d9434cbb792037c&client_secret=c4f67cc0329e031e5c6772608ea157a3c8761aac&code="+this.$route.query.code;o.a.get(e,{headers:{Accept:"application/json"}}).then((function(e){t.authData.github=e.data,t.authData.github.access_token?o.a.get("https://api.github.com/user?access_token="+t.authData.github.access_token).then((function(e){t.authData.github.uid=e.data.login,t.$store.state.username?t.connectAccount():t.loginGitHub()})):t.connectInfo="Connection Failed. Please try it again."})).catch((function(e){t.$message({type:"error",message:e.response.data.error})}))},methods:{loginGitHub:function(){var t=this;this.$axios.post("users",{authData:this.authData}).then((function(e){200===e.status?(t.$message({type:"success",message:"Login successfully by GitHub."}),t.$store.commit("SET_OBJECT_ID",e.data.objectId),t.$store.commit("SET_USER",e.data.username),t.$store.commit("SET_SESSION_TOKEN",e.data.sessionToken),t.$router.push("/users")):201===e.status?t.$message({type:"success",message:"GitHub Connected. Sign up successfully."}):t.$message.error(e.data.info)})).catch((function(e){t.$message({type:"error",message:e.response.data.error})}))},connectAccount:function(){var t=this;this.connectInfo="Connection Succeeded",this.$axios.put("users/"+this.$store.state.objectId,{authData:this.authData}).then((function(e){t.$message({type:"success",message:"Connect Account Successfully ÔºÅ"}),t.$router.push("/users/profile?tab=thirdOAuth")})).catch((function(e){t.$message({type:"error",message:e.response.data.error})}))}}},h=n(27),component=Object(h.a)(r,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"center"},[e("h1",{staticClass:"title"},[this._v("\n    "+this._s(this.title)+"\n  ")]),this._v(" "),e("h2",{staticClass:"subtitle"},[this._v("\n    "+this._s(this.connectInfo)+"\n  ")])])}),[],!1,null,null,null);e.default=component.exports}}]);